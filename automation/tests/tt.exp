#!/usr/bin/expect -d

exp_internal 1
set HOST [lindex $argv 0]
set USERNAME [lindex $argv 1]
set timeout -1
set openidinum 970accb6-f8a1-4190-825c-6492d5627223
set umaID 7a55c863-a86b-411b-b71a-0c6c37747a3f
spawn $env(SHELL)
match_max 100000
expect  "$"
send -- "ssh ${USERNAME}@${HOST}"
expect -exact "${HOST}"
send -- "\r"
expect -re "(.*)\n"

send -- "/opt/jans/jans-cli/config-cli.py --no-suggestion"
expect -exact "/opt/jans/jans-cli/config-cli.py --no-suggestion"
send -- "\r"
expect "Selection:"

#puts "OAuth - OpenID Connect - Clients"

#send -- "16\r"
#expect "OAuth - OpenID Connect - Clients"
#send -- "1\r"
#expect "Gets list of OpenID Connect clients"
#send -- "\r"
#expect "pattern:"
#send -- "\r"
#expect "startIndex"
#send -- "\r"
#expect "sortBy"
#send -- "\r"
#expect "sortOrder"
#send -- "\r"
#expect "backchannelTokenDeliveryMode"
#send -- "b\r"
#expect "OAuth - OpenID Connect - Clients"
#send -- "2\r"
#expect "displayName"
#send -- "myopenclient\r"
#expect "applicationType"
#send -- "web\r"
#expect "includeClaimsInIdToken"
#send -- "\r"
#expect "Populate optional fields?"
#send -- "n\r"
#expect "Continue?"
#send -- "y\r"
#expect "Selection:"
#send -- "b\r"
#expect "OAuth - OpenID Connect - Clients"
#send -- "3\r"
#expect "Get OpenId Connect Client by Inum"
#send -- "$openidinum\r"
#expect "clientName"
#send -- "18\r"
#expect "contacts"
#send -- "manojsurya78@gmail.com\r"
#expect "Selection:"
#send -- "s\r"
#expect "Continue?"
#send -- "y\r"
#expect "manojsurya78@gmail.com"
#send -- "b\r"
#expect "OAuth - OpenID Connect - Clients"

#send -- "4\r"
#expect "Get OpenId Connect Client by Inum"
#send -- "$openidinum\r"
#expect "$openidinum"
#send -- "b\r"
#expect "OAuth - OpenID Connect - Clients"
#send -- "6\r"
#expect "inum:"
#send -- "$openidinum\r"
#expect "op:"
#send -- "replace\r"
#expect "path:"

#send -- "clientName\r"
#expect "value"
#send -- "myopenidclient1\r"
#expect "Another patch operation?"
#send -- "n\r"
#expect "Continue?"
#send -- "y\r"
#expect "myopenidclient1"  timeout {
#    puts "unable to save client name"
#   exit 1
# 
#} 
#send -- "b\r"
#expect "OAuth - OpenID Connect - Clients"
##send -- "5\r"
##expect "inum:"
##send -- "$openidinum\r"
##expect "Are you sure want to delete"
##send -- "y\r"
##expect "Selection:"
##send -- "b\r"
##expect "OAuth - OpenID Connect - Clients"
#send -- "b\r"
#expect "Attribute"

send -- "17\r"
expect "OAuth - UMA Resources"
send  -- "2\r"
expect "id:"
send -- "manojUMA\r"
expect "iconUri"
send -- "http://google.com\r"
expect "type"
send -- "WEB\r"
expect "Populate optional fields?"
send -- "y\r"
expect "Selection:"
send -- "8\r"
expect "description"
send -- "umadesc\r"
expect "Selection:"
send -- "#\r"
expect "Selection:"
send -- "1\r"
expect "name"
send -- "UMAresource\r"
expect "Selection:"
send -- "c\r"
expect "Continue?"
send -- "y\r"
expect "UMAresource"
send -- "b\r"
expect "OAuth - UMA Resources"
send  -- "1\r"
expect "limit"
send  -- "\r"
expect "pattern"

send  -- "\r"
expect "UMAresource"
send -- "b\r"
expect "OAuth - UMA Resources"
send  -- "3\r"
expect "id:"
send -- "$umaID\r"
expect "Fields"
send -- "10\r"
expect "name"
send -- "UMAresourceId\r"
expect "Selection:"
send -- "s\r"
expect "Continue?"
send -- "y\r"
expect "UMAresourceId"

send -- "b\r"
expect "OAuth - UMA Resources"

send  -- "4\r"
expect "id:"
send -- "$umaID\r"
expect "$umaID"

send -- "b\r"
expect "OAuth - UMA Resources"

send  -- "6\r"
expect "id:"
send -- "$umaID\r"

expect "op:"
send -- "replace\r"
expect "path:"
send -- "name\r"
expect "value"
send -- "UMAResource\r"
expect "Another patch operation?"
send -- "n\r"

expect "Continue?"
send -- "y\r"
expect "UMAResource"
send -- "b\r"
expect "OAuth - UMA Resources"









expect eof
